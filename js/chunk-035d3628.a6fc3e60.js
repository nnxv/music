(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-035d3628"],{"0076":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"song-list"},[e("div",{staticClass:"button-wrap"},[e("PlayIcon"),e("div",{staticClass:"button-name"},[e("span",[t._v("全部播放")]),e("span",{staticClass:"song-count"},[t._v(t._s("(共"+t.songs.length+"首)"))])])],1),e("ul",t._l(t.songs,(function(s,a){return e("li",{key:s.id,staticClass:"song-item",on:{click:function(e){return t.onRowClick(s)}}},[t.orderShow?e("div",{staticClass:"index-wrap"},[t.isActiveSong(s.id)?e("Icon",{staticClass:"horn",attrs:{type:"horn",color:"theme"}}):e("span",{domProps:{textContent:t._s(a+1)}})],1):t._e(),e("div",{staticClass:"song-content"},[e("p",{staticClass:"song-name",class:t.songCls(s.id)},[t._v(t._s(s.name))]),e("p",{staticClass:"singer"},[t._v(t._s(s.artistsText+" - "+s.albumName))])]),s.mvId?e("div",{staticClass:"icon-wrap"},[e("Icon",{staticClass:"mv-icon",attrs:{type:"mv",color:"theme",size:22}})],1):t._e()])})),0)])},n=[],i=e("5530"),o=e("e7e6"),r={props:{songs:{type:Array,default:function(){return[]}},orderShow:{type:Boolean,default:!0}},data:function(){return{}},methods:Object(i["a"])(Object(i["a"])({onRowClick:function(t){this.startSong(t),this.setPlayerShow(!0),this.setPlaylist(this.songs)},isActiveSong:function(t){return t===this.currentSong.id},songCls:function(t){return this.isActiveSong(t)?"playing":""}},Object(o["a"])(["startSong"])),Object(o["c"])(["setPlaylist","setPlayerShow"])),computed:Object(i["a"])({},Object(o["d"])(["currentSong"]))},c=r,l=(e("5b3b"),e("2877")),m=Object(l["a"])(c,a,n,!1,null,"09490647",null);s["a"]=m.exports},"06f2":function(t,s,e){"use strict";var a=e("48ee"),n=e.n(a);n.a},1012:function(t,s,e){},"1f31":function(t,s,e){},"3d38":function(t,s,e){},"48ee":function(t,s,e){},"5a68":function(t,s,e){"use strict";var a=e("9000"),n=e.n(a);n.a},"5b3b":function(t,s,e){"use strict";var a=e("1f31"),n=e.n(a);n.a},"76bb":function(t,s,e){"use strict";var a=e("1012"),n=e.n(a);n.a},9e3:function(t,s,e){},a754:function(t,s,e){"use strict";var a=e("3d38"),n=e.n(a);n.a},c17f:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("transition",{attrs:{name:"slide"}},[e("div",{staticClass:"playlist-detail"},[e("div",{ref:"plheadBg",staticClass:"plhead_bg",style:t.getbg}),e("div",{staticClass:"list-fixed"},[e("Icon",{staticClass:"back",attrs:{type:"back",color:"white"},nativeOn:{click:function(s){return t.back(s)}}}),e("p",{staticClass:"fixed-title"},[t._v("歌单")])],1),t.songs.length?e("Scroll",{ref:"scroller",staticClass:"scrollHeight",attrs:{options:{probeType:3}},on:{scroll:t.scroll}},[e("DetailHeader",{attrs:{playlist:t.playlist},on:{show:t.showComment,showPlaylist:t.showPlaylist}}),e("SongList",{directives:[{name:"show",rawName:"v-show",value:!t.commentShow,expression:"!commentShow"}],staticClass:"song-list",attrs:{songs:t.songs}}),e("Comments",{directives:[{name:"show",rawName:"v-show",value:t.commentShow,expression:"commentShow"}],staticClass:"comment-list",attrs:{id:Number(t.id),type:"playlist"},on:{load:t.loadImg}})],1):t._e()],1)])},n=[],i=(e("d81d"),e("fb6a"),e("b0c0"),e("96cf"),e("1da1")),o=e("365c"),r=e("ed08"),c=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.playlist.id?e("div",{staticClass:"playlist-header"},[e("div",{staticClass:"header"},[e("div",{staticClass:"img-wrap"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$utils.genImgUrl(t.playlist.coverImgUrl,130),expression:"$utils.genImgUrl(playlist.coverImgUrl, 130)"}]}),t.playlist.playCount?e("div",{staticClass:"playCount-wrap"},[e("Icon",{attrs:{type:"play"}}),t._v(" "+t._s(t.$utils.formatNumber(t.playlist.playCount))+" ")],1):t._e()]),e("div",{staticClass:"content"},[e("div",{staticClass:"title-wrap"},[e("p",{staticClass:"title"},[t._v(t._s(t.playlist.name))])]),e("div",{staticClass:"creator-wrap"},[e("img",{staticClass:"avatar",attrs:{src:t.$utils.genImgUrl(t.playlist.creator.avatarUrl,30)}}),e("p",{staticClass:"creator"},[t._v(t._s(t.playlist.creator.nickname))])]),e("div",{staticClass:"desc-wrap"},[t.playlist.description?e("p",{staticClass:"desc"},[t._v(t._s(t.playlist.description))]):e("p",{staticClass:"desc"},[t._v(t._s(t.暂无简介))])])])]),e("div",{staticClass:"button"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.showList,expression:"!showList"}],on:{click:t.goComment}},[e("Icon",{attrs:{type:"pinglun",color:"white",size:18}}),e("p",[t._v(t._s(t.$utils.formatNumber(t.playlist.commentCount)))])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showList,expression:"showList"}],on:{click:t.goPlaylist}},[e("Icon",{attrs:{type:"gedan",size:18}}),e("p",[t._v(t._s(t.$utils.formatNumber(t.playlist.trackCount)))])],1),e("div",[e("Icon",{attrs:{type:"share",color:"white",size:18}}),e("p",[t._v(t._s(t.$utils.formatNumber(t.playlist.shareCount)))])],1)])]):t._e()},l=[],m={props:{playlist:{type:Object,default:function(){return{}}}},data:function(){return{showList:!1}},computed:{getbg:function(){return{"background-image":"url(".concat(this.playlist.coverImgUrl,"?param=170y170)")}}},methods:{goComment:function(){this.$emit("show"),this.showList=!this.showList},goPlaylist:function(){this.$emit("showPlaylist"),this.showList=!this.showList}}},u=m,d=(e("a754"),e("2877")),p=Object(d["a"])(u,c,l,!1,null,"4ce405a7",null),h=p.exports,v=e("0076"),f=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"comments-wrap"},[t.hotComments.length?e("div",{staticClass:"block"},[e("p",{staticClass:"title"},[t._v("精彩评论")]),t._l(t.hotComments,(function(t){return e("Comment",{key:t.id,attrs:{comment:t}})}))],2):t._e(),e("div",{staticClass:"block"},[e("p",{staticClass:"title"},[t._v("最新评论")]),t._l(t.comments,(function(s){return e("Comment",{key:s.id,attrs:{comment:s},on:{load:t.loadImg}})}))],2)])},g=[],C=(e("a9e3"),e("d3b7"),e("ade3")),w=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.comment?e("div",{staticClass:"comment"},[e("div",{staticClass:"avatar"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$utils.genImgUrl(t.comment.user.avatarUrl,80),expression:"$utils.genImgUrl(comment.user.avatarUrl, 80)"}],attrs:{alt:""},on:{load:t.load}}),e("div",{staticClass:"user"},[e("p",{staticClass:"username"},[t._v(t._s(t.comment.user.nickname))]),e("p",{staticClass:"date"},[t._v(t._s(t.$utils.formatDate(t.comment.time)))])]),e("div",[e("span",{staticClass:"likedCount"},[t._v(t._s(t.comment.likedCount))]),e("Icon",{attrs:{type:"good",size:12}})],1)]),e("div",{staticClass:"content"},[e("span",{staticClass:"text"},[t._v(t._s(t.comment.content))])])]):t._e()},y=[],b={props:["comment"],methods:{load:function(){this.$emit("load")}}},_=b,k=(e("06f2"),Object(d["a"])(_,w,y,!1,null,"5de5bddf",null)),S=k.exports,x="song",I="playlist",$="mv",O=20,j={props:{id:{type:Number,require:!0},type:{type:String,default:x}},created:function(){this.PAGE_SIZE=O},data:function(){return{loading:!1,hotComments:[],comments:[],total:0,currentPage:1}},methods:{loadImg:function(){this.$emit("load")},getComment:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var e,a,n,i,r,c,l,m,u,d,p,h;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.loading=!0,e={},Object(C["a"])(e,I,o["i"]),Object(C["a"])(e,x,o["o"]),Object(C["a"])(e,$,o["f"]),a=e,n=a[t.type],s.next=5,n({id:t.id,pageSize:O}).finally((function(){t.loading=!0}));case 5:if(i=s.sent,r=i.hotComments,c=void 0===r?[]:r,l=i.comments,m=void 0===l?[]:l,u=i.total,t.type!==I||1!==t.currentPage){s.next=20;break}return s.next=14,Object(o["c"])({id:t.id,type:2});case 14:d=s.sent,p=d.hotComments,h=void 0===p?[]:p,t.hotComments=h,s.next=21;break;case 20:t.hotComments=c;case 21:t.comments=m,t.total=u,t.$emit("update",{comments:m,hotComments:c,total:u});case 24:case"end":return s.stop()}}),s)})))()}},watch:{id:{handler:function(t){t&&(this.currentPage=1,this.getComment())},immediate:!0}},components:{Comment:S}},P=j,N=(e("76bb"),Object(d["a"])(P,f,g,!1,null,"055d0f98",null)),U=N.exports,L=500,z={props:["id"],data:function(){return{playlist:{},songs:[],commentShow:!1,scrollY:0}},methods:{showPlaylist:function(){var t=this;this.commentShow=!this.commentShow,setTimeout((function(){t.$refs.scroller.refresh()}),20)},loadImg:function(){this.$refs.scroller.refresh()},showComment:function(){var t=this;this.commentShow=!this.commentShow,setTimeout((function(){t.$refs.scroller.refresh()}),20)},init:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var e,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Object(o["d"])({id:t.id});case 2:e=s.sent,a=e.playlist,t.playlist=a,t.genSonglist(a);case 6:case"end":return s.stop()}}),s)})))()},genSonglist:function(t){var s=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.trackIds.map((function(t){var s=t.id;return s})),e.next=3,Object(o["p"])(a.slice(0,L));case 3:n=e.sent,i=n.songs.map((function(t){var s=t.id,e=t.name,a=t.al,n=t.ar,i=t.mv,o=t.dt;return Object(r["createSong"])({id:s,name:e,artists:n,albumName:a.name,img:a.picUrl,mvId:i,duration:o})})),s.songs=i;case 6:case"end":return e.stop()}}),e)})))()},back:function(){this.$router.back()},scroll:function(t){this.scrollY=t}},computed:{getbg:function(){return{"background-image":"url(".concat(this.playlist.coverImgUrl,"?param=170y170)")}}},watch:{id:{handler:function(){this.init()},immediate:!0},scrollY:function(t){t>0&&(this.$refs.plheadBg.style.bottom="".concat(58-t/6,"%"))}},components:{DetailHeader:h,SongList:v["a"],Comments:U}},R=z,E=(e("5a68"),Object(d["a"])(R,a,n,!1,null,"6381ddfe",null));s["default"]=E.exports}}]);
//# sourceMappingURL=chunk-035d3628.a6fc3e60.js.map